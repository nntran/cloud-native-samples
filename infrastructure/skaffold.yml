apiVersion: skaffold/v4beta11
kind: Config
metadata:
  name: infrastructure

requires:
  - configs: ["mongodb"]
    git:
      repo: https://github.com/flexwiz/fw-cnt.git
      path: storage/database/mongodb/skaffold.yaml
      ref: main
      sync: true
    activeProfiles: &profiles
      - name: local
        activatedBy: [local]

  # - configs: ["redis"]
  #   git:
  #     repo: https://github.com/flexwiz/fw-cnt.git
  #     path: databases/redis/skaffold.yaml
  #     ref: main
  #     sync: true
  #   activeProfiles: *profiles

  # - configs: ["rabbitmq"]
  #   git:
  #     repo: https://github.com/flexwiz/fw-cnt.git
  #     path: message-brokers/rabbitmq/skaffold.yaml
  #     ref: main
  #     sync: true
  #   activeProfiles: *profiles

  # - configs: ["keycloak"]
  #   git:
  #     repo: https://github.com/flexwiz/fw-cnt.git
  #     path: security/keycloak/skaffold.yaml
  #     ref: main
  #     sync: true
  #   activeProfiles: *profiles

  # - configs: ["api-gateway"]
  #   path: api-gateway
  #   activeProfiles: *profiles
